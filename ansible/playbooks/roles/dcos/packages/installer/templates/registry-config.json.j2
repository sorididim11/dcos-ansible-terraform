
{
  "service": {
    "name": "{{item.name}}"
  },

  "security": {
    "enable": {{ item.options.is_insecure_registry | default('false') }},
    "http_tls_download_ip": "{{groups['dcos_bootstrap'][0]}}",
    "http_tls_download_port": "{{ dcos_bootstrap_port }}",
    "http_tls_certificate_filename": "{{item.name}}.crt",
    "http_tls_key_filename": "{{item.name}}.key"
  },

  "storage": {
    "storage_path": "/var/lib/registry",
    "host_volume_registry": "{{ item.options.host_volume_path | default('tmp')}}"
  },

  "networking": {
    "external_access":  {
      "enable": {{item.options.make_external | default('false')}},
      "external_access_port": {{item.options.external_port | default(15000)}}
    },
    "port": {{ item.options.internal_port | default(5000) }}
  }
}